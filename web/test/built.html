<html>
<head>
<script>
var latest;
function newsubmit(event) {
    //var target = event ? event.target : this;

    // do anything you like here
    //alert('Submitting form to ' + event);

    // call real submit function
    //if ( latest == null ) {
      //alert("loading...");
      //latest = this._click;
    //}
    //latest();
    this._click();
}

// capture the onsubmit event on all forms
window.addEventListener('click', newsubmit, true);

// If a script calls someForm.submit(), the onsubmit event does not fire,
// so we need to redefine the submit method of the HTMLFormElement class.
HTMLFormElement.prototype._click = HTMLFormElement.prototype.click;
HTMLFormElement.prototype.click = newsubmit;
</script>
</head>
<body>
<a href="#foo" onclick="document.getElementById('bar').click(); return false;">foo</a>
<a href="#bar" id="bar">bar</a>
</body>
</html>
