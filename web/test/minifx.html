<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
	<title>mini.fx test</title>
	<style type="text/css" media="screen">
		body {
			font-size: 12px;
			font-family: Arial;
		}
		a {
			color: blue;
		}
		#container, #container2 {
			margin: 10px;
			background: #555;
			color: #fff;
			width: 300px;
			font-size: 1.1em;
			float: left;
			position: relative;
		}
		p#text, p#text2 {
			margin: 0;
			padding: 5px;
			height: 200px;
			overflow: hidden;
		}
	</style>
	<script type="text/javascript" src="/minifx.js"></script>
	<script type="text/javascript">
	window.onload = function() {
		myFadeSize = new fx.FadeSize('container');
		myResize = new fx.Resize('container');
		myTextPX = new fx.Text('container',{unit: "px"});									
		myTextEM = new fx.Text('container');
		myOpacity = new fx.Opacity('container');
		myWidth = new fx.Width('container');
		myHeight = new fx.Height('container');
		myMove = new fx('container', {onComplete: function(){
			if (myMove.cur() > 0)	myMove.custom(100, 0);
		}}, "left" );
	}
	
	function process() {
		var t = document.getElementById("input").value;
		var b = document.getElementById("output");
		
		var m = true;
		var f = {};
		var d = [];
		var n = 0;
		
		alert( "before: " + t.length );
		
		var re = /\/\*.*?\*\//g;
		t = t.replace(re,"");
		
		var i = 0;
		var re = /([a-zA-Z0-9]{3,})/g;
		while ( (m = re.exec(t)) != null && i < 8 ) {
			//alert( m[1] );
			if ( !f[m[1]] ) {
				f[m[1]] = n++;
				d.push(m[1]);
			}
			//t = t.replace(re,"`"+f[m[1]]);
			i++;
		}
		
		d = d.sort(function(a,b){ return (a.length > b.length ? -1 : ( b.length > a.length ? 1 : 0 ) ) });
	
		for ( var i in d ) {
			if ( f[d[i]] > 1 ) {
				var re = new RegExp(d[i],"g");
				t = t.replace(re,"`"+i);
			}
		}
		
		for ( var i in d ) {
			t += "|" + d[i];
		}
		
		alert( "after: " + t.length );
		b.value = t;
	}
	</script>
</head>
<body>
	<h1><a href="http://ejohn.org/projects/minifx/">mini.fx</a> test page</h1>
	<div id="nav">
		<strong>Basic:</strong>
		<a href="#" onclick="myOpacity.toggle();" rel="cazzi mazzi">toggle Opacity</a>
		<a href="#" onclick="myHeight.toggle();">toggle Height</a>
		<a href="#" onclick="myWidth.toggle();">toggle Width</a><br /><br />
		<strong>Advanced:</strong>
		<a href="#" onclick="myMove.custom(0, 100);">Move 100px to the Right</a>
		<a href="#" onclick="myFadeSize.toggle('width');">FadeSize width</a>
		<a href="#" onclick="myFadeSize.toggle('height');">FadeSize height</a>
		<a href="#" onclick="myFadeSize.toggle('width', 'height');">FadeSize width+height</a>
		<a href="#" onclick="myResize.toggle();">toggle Resize</a>
		<a href="#" onclick="myResize.modify(50, 100);">custom Resize</a>
		<a href="#" onclick="myTextEM.custom(1, 2);">Text from 1 to 2 (ems)</a>
		<a href="#" onclick="myTextPX.custom(15, 25);">Text from 15 to 25 (px)</a><br /><br />
	</div>
	<div id="wrapper">
		<div id="container"> 
		<p id="text">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec dictum velit eget risus. Fusce ligula. Maecenas vitae velit eget odio pulvinar aliquet. Quisque ultricies mollis lorem. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Praesent dapibus odio. Nullam sodales erat vel pede. Morbi ut turpis. Sed sed metus. Donec ut dui.
		Duis gravida risus non nibh. Aliquam erat volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam dolor urna, tincidunt eget, posuere nec, suscipit quis, arcu. Proin pede risus, placerat id, tincidunt eu, consequat in, sem. </p>
		</div>
		<div id="container2">
		<p id="text2">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec dictum velit eget risus. Fusce ligula. Maecenas vitae velit eget odio pulvinar aliquet. Quisque ultricies mollis lorem. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Praesent dapibus odio. Nullam sodales erat vel pede. Morbi ut turpis. Sed sed metus. Donec ut dui.
		Duis gravida risus non nibh. Aliquam erat volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam dolor urna, tincidunt eget, posuere nec, suscipit quis, arcu. Proin pede risus, placerat id, tincidunt eu, consequat in, sem. Sed eu sapien.</p>
		</div>
	</div>
	<p class="info">This project is based upon the 
	<a href="http://moofx.mad4milk.net">moo.fx</a> project. This particular
	implementation offers the following benefits:
	<ul>
		<li>Does not use prototype.js (Big space saver!)</li>
		<li>Implements the important features from moo.fx.pack.js (FadeSize, Resize, and Text)</li>
		<li>Still just 3kb, uncompressed! (and 1.9kb compressed)</li>
		<li>Can handle animations of other parameters (position, etc.)</li>
	</ul>
	</p>
	<!--
	<textarea id="input"></textarea><br/>
	<input type="button" onclick="process();" value="Compress"/><br/>
	<textarea id="output"></textarea>
	-->
</body></html>
